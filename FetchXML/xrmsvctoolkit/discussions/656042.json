[
  {
    "Id": "1477828",
    "ThreadId": "656042",
    "Html": "Hi, \r<br />\n<br />\nI have tried to update my toolkit (v0.2) to v2.2, but there was an error in the code. \r<br />\nEspecially this function: it includes a word &quot;CRMEntity&quot; that prevents me to save the script in CRM.  This is very strange error. Please advise why this happens. \r<br />\n<br />\nvar innerSurrogateAmpersandWorkaround = function (s) {<br />\n<pre><code>    var buffer = '';\n    var c0;\n    for (var cnt = 0, slength = s.length; cnt &lt; slength; cnt++) {\n        c0 = s.charCodeAt(cnt);\n        if (c0 &gt;= 55296 &amp;&amp; c0 &lt;= 57343)\n            if (cnt + 1 &lt; s.length) {\n                var c1 = s.charCodeAt(cnt + 1);\n                if (c1 &gt;= 56320 &amp;&amp; c1 &lt;= 57343) {\n                    buffer += &quot;CRMEntityReferenceOpen&quot; + ((c0 - 55296) * 1024 + (c1 &amp; 1023) + 65536).toString(16) + &quot;CRMEntityReferenceClose&quot;; cnt++;\n                }\n                else\n                    buffer += String.fromCharCode(c0);\n            }\n            else buffer += String.fromCharCode(c0);\n        else buffer += String.fromCharCode(c0);\n    }\n    s = buffer;\n    buffer = &quot;&quot;;\n    for (cnt = 0, slength = s.length; cnt &lt; slength; cnt++) {\n        c0 = s.charCodeAt(cnt);\n        if (c0 &gt;= 55296 &amp;&amp; c0 &lt;= 57343)\n            buffer += String.fromCharCode(65533);\n        else buffer += String.fromCharCode(c0);\n    }\n    s = buffer;\n    s = htmlEncode(s);\n    s = s.replace(/CRMEntityReferenceOpen/g, &quot;&amp;#x&quot;);\n    s = s.replace(/CRMEntityReferenceClose/g, &quot;;&quot;);\n    return s;\n};\n\n\n</code></pre>\n\nRegards,<br />\n",
    "PostedDate": "2016-06-30T22:05:40.377-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]